\NewDocumentCommand{\prn}{m}{\DelimPrn{#1}}
\NewDocumentCommand{\brc}{m}{\DelimBrc{#1}}
\NewDocumentCommand{\brk}{m}{\DelimBrk{#1}}
\NewDocumentCommand{\gls}{m}{\DelimGl{#1}}
\NewDocumentCommand{\verts}{m}{\DelimSurround{|}{|}{#1}}
\NewDocumentCommand\Compr{mm}{\DelimBetweenSurround{\lbrace}{\vert}{\rbrace}{#1}{#2}}

\NewDocumentEnvironment{sketch}{}{\paragraph{\normalcolor \emph{Sketch}} \color{red}}{\normalcolor}

\newcommand{\defeq}{\triangleq}

\newcommand{\MLTT}{\textup{\textsf{MLTT}}}
\newcommand{\MTT}{\textup{\textsf{MTT}}}
\newcommand{\AdjTT}{\textup{\textsf{AdjTT}}}
\newcommand{\CoTT}{\textup{\textsf{CoTT}}}


\NewDocumentCommand{\Sum}{m}{\textstyle \DelimMin{2}\sum_{\DelimProtect{#1}}}
\NewDocumentCommand{\Prod}{m}{\textstyle \DelimMin{2}\prod_{\DelimProtect{#1}}}
\NewDocumentCommand{\Coprod}{m}{\textstyle \DelimMin{2}\coprod_{\DelimProtect{#1}}}
\NewDocumentCommand{\Pushout}{m}{\mathbin{\textstyle \DelimMin{2}\coprod_{\DelimProtect{#1}}}}
\NewDocumentCommand{\In}{m}{\mathsf{in}_{#1}}

\NewDocumentCommand{\Open}{}{\textnormal{\fullmoon}}
\NewDocumentCommand{\Closed}{}{\textnormal{\newmoon}}
\NewDocumentCommand{\Dep}{m}{\hat{#1}}

\NewDocumentCommand{\ClIncl}{s}{\IfBooleanTF{#1}{\mathbf{i}^*}{\mathbf{i}_*}}
\NewDocumentCommand{\OpenIncl}{s}{\IfBooleanTF{#1}{\mathbf{j}^*}{\mathbf{j}_*}}
\NewDocumentCommand{\OpenInclShriek}{}{{\mathbf{j}^!}}

\NewDocumentCommand{\Uni}{O{}}{\mathsf{U}_{#1}}
\NewDocumentCommand{\Dec}{O{}g}{\mathsf{El}_{#1}\IfValueT{#2}{\prn{#2}}}

\NewDocumentCommand{\IsTm}{O{\Gamma}mm}{#1 \vdash #2 \colon #3}
\NewDocumentCommand{\IsTy}{O{\Gamma}m}{#1 \vdash #2}
\NewDocumentCommand{\IsDCx}{mm}{#1; #2\ \mathsf{dcx}}
\NewDocumentCommand{\IsCx}{m}{#1\ \mathsf{cx}}
\NewDocumentCommand{\IsSb}{O{\Gamma}mm}{\Mor[#2]{#1}{#3}}
\NewDocumentCommand{\IsDSb}{O{\Gamma}mmm}{\Mor[#2;#3]{#1}{#4}}

\NewDocumentCommand{\EmpCx}{}{\mathbf{1}}
\NewDocumentCommand{\ECx}{mm}{#1.#2}

\NewDocumentCommand{\Wk}{}{\mathsf{p}}
\NewDocumentCommand{\ESb}{mm}{#1.#2}
\NewDocumentCommand{\ISb}{}{\ArrId{}}
\NewDocumentCommand{\EmpSb}{}{\ArrTerm{}}
\NewDocumentCommand{\LiftSb}{m}{\mathsf{cart}\prn{#1}}
\NewDocumentCommand{\FactorSb}{mm}{\gls{#1,#2}}

\NewDocumentCommand{\Circ}{}{{\textnormal{\fullmoon}}}
\NewDocumentCommand{\MkBox}{m}{\mathsf{box}\prn{#1}}
\NewDocumentCommand{\MkCirc}{m}{\mathsf{circ}\prn{#1}}
\NewDocumentCommand{\UnCirc}{m}{\mathsf{uncirc}\prn{#1}}
\NewDocumentCommand{\LetBox}{mm}{\mathsf{let}\ \MkBox{-} \gets #1\ \mathsf{in}\ #2}
\NewDocumentCommand{\LetMod}{mmmm}{\mathsf{let}_{#3}\ \mathsf{mod}_{#4}\prn{-} \gets #1\ \mathsf{in}\ #2}
\NewDocumentCommand{\Var}{}{\mathsf{q}}
\NewDocumentCommand{\MVar}{}{\mathsf{q}}
\NewDocumentCommand{\Sb}{mm}{#1\brk{#2}}

\NewDocumentCommand{\CMkCirc}{}{\mathbf{circ}}
\NewDocumentCommand{\CCirc}{}{\mathbf{Circ}}
\NewDocumentCommand{\CMkBox}{}{\mathbf{box}}
\NewDocumentCommand{\CBox}{}{\mathbf{Box}}
\NewDocumentCommand{\CLetBox}{}{\mathbf{letbox}}

\NewDocumentCommand{\El}{o}{\IfValueTF{#1}{\tau_{#1}}{\tau}}
\NewDocumentCommand{\EL}{o}{\IfValueTF{#1}{\mathcal{U}^{\bullet}_{#1}}{\mathcal{U}^{\bullet}}}
\NewDocumentCommand{\TY}{o}{\IfValueTF{#1}{\mathcal{U}_{#1}}{\mathcal{U}}}

\NewDocumentCommand{\VEl}{o}{\IfValueTF{#1}{\upsilon_{#1}}{\upsilon}}
\NewDocumentCommand{\VEL}{o}{\IfValueTF{#1}{\mathcal{V}^{\bullet}_{#1}}{\mathcal{V}^{\bullet}}}
\NewDocumentCommand{\VTY}{o}{\IfValueTF{#1}{\mathcal{V}_{#1}}{\mathcal{V}}}


\NewDocumentCommand\Kwd{m}{{\normalfont\textbf{#1}}}
\ExplSyntaxOn
\cs_new:Npn \jms_start_make_record:nnnn #1 #2 #3 #4 {
  \qquad
  \begin{array}[t]{l}
    #1\ #2\IfValueT{#3}{\ \prn{#3}}\IfValueT{#4}{:#4}\ \Kwd{where}\\
    \ \begin{array}[t]{l}
}

\cs_new:Npn \jms_stop_make_record: {
  \end{array}
  \end{array}
}

\cs_new:Npn \jms_install_record_former:nn #1 #2 {
  \NewDocumentEnvironment{#1}{mog}{
    \jms_start_make_record:nnnn {#2} {##1} {##2} {##3}
  }{
    \jms_stop_make_record:
  }
}

\jms_install_record_former:nn {make-rcd} {\Kwd{record}}
\jms_install_record_former:nn {make-data} {\Kwd{data}}

\ExplSyntaxOff
